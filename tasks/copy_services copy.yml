- name: "Copy services to {{ service_path }}"
  copy: 
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
  with_items:
    - { src: port_db.xml, dest: /usr/lib/firewalld/services/port_db.xml }
  notify:
    - Reload service firewalld

- name: "Copy template to destination"
  template:
    src: '{{ item.src }}' 
    dest: '{{ item.dest }}' 
    owner: root
    group: root
    mode: 'root'
  vars:
    
  with_items:
  - { src: 'template.j2', dest: 'template' }
# https://docs.ansible.com/ansible/latest/modules/template_module.html 
# https://chmodcommand.com/ 

- meta: flush_handlers

- name: Activate ports
  firewalld:
    zone: public
    service: "{{ item.port }}"
    permanent: yes
    state: enabled
  with_items:
    - { port: port_db }
  notify:
    - Reload service firewalld